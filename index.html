<!DOCTYPE html>
<body>
  <style>
    * {
      color: #aaa;
    }
    body {
      padding: 10px;
      background: #111;
      font-family: arial, sans-serif;
      margin: auto;
      max-width: 600px;
    }
    p {
      font-size: 18px;
    }
    b { color: #fff; }
    pre {
      border: 1px #333 solid;
      padding: 20px;
      line-height: 150%;
      overflow-x: auto;
      background: #222;
      margin-left: 30px;
      max-width: 600px;
    }
    div {
      margin-left: 30px;
    }
  </style>
  <script>
  
    var JG = {};
    
    JG = (function(jg) {
      
      var problem = document.location.search.substr(1);
      
      if (problem) {
        var script = document.createElement('script');
        script.setAttribute('src', problem + '.js');
        document.body.appendChild(script);
      }
      else {
        var title = document.createTextNode('Append ?1 to URL for my solution to https://projecteuler.net/problem=1 etc');
        document.body.appendChild(title);
      }
      
      function solution(num, func) {
        
        // separate the comment explaining the problem from the solution
        var tmp = document.createElement('p');
        tmp.innerText = func;
        var bits = tmp.innerText.split(/ *\/\* *START| *END *\*\/\n/m); // use /*START blah blah END*/ to hold the problem text
        if (bits.length >= 3) {
          var problemText = bits.splice(1, 1); // returns the comment
          var codeText = bits.join(""); // with comment now gone
        }
        
        var title = document.createElement('h1');
        title.innerHTML = 'Project Euler - <a href="https://projecteuler.net/problem=' + num + '">Problem #' + num + '</a>';
        document.body.appendChild(title);
        
        var problem = document.createElement('div');
        var text = problemText[0].split("\n").map(function(line) { return line.trim(); }).join("</p><p>").trim();
        problem.innerHTML = '<p>' + text + '</p>';
        document.body.appendChild(problem);
        
        var result = document.createElement('p');
        var start = Date.now();
        var evaled = func();
        var timeTaken = Date.now() - start;
        result.innerHTML = 'Result: <b>' + evaled + '</b> (took ' + timeTaken + 'ms)';
        document.body.appendChild(result);
        
        var p = document.createElement('pre');
        p.innerText = codeText;
        document.body.appendChild(p);
      }
      
      jg.solution = solution;
      
      return jg;
      
    })(JG);
    
  </script>
</body>